<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <%- include('head-links') -%>
  <title><%=singleBook.title%> by <%=singleBook.authors_names%></title>
</head>
<body>
  <!-- KIV: Address the fact that visitors are able to access this section -->
  <%- include('user-navbar') -%>

     <div class="container-fluid my-5 w-75">
        <div class="row mt-4">
            <div class="col text-center my-4">    
              <div class="row">
                <!-- Book Image -->
                <div class="col d-flex justify-content-center">
                  <img class="library-img shadow-sm mx-3" src="<%=singleBook.book_cover%>" />
                </div>
              </div> 

              <!-- Start of Add To Collection -->
              <div class="row mt-2 mb-2 mx-auto w-75">
                <div class="col">
                  <form method="POST" action="/books/<%=singleBook.id%>">
                      <% if (bookExistsArr.length < 1) { %> 
                          <button id="added" class="btn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#002b3a" class="bi bi-bookmark-star" viewBox="0 0 20 20">
                          <path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.178.178 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.178.178 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.178.178 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.178.178 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.178.178 0 0 0 .134-.098L7.84 4.1z"/>
                          <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                          </svg><span id="darkblue-palette">Add to Collection</span></button> 
                      <% } else { %>
                          <button id="added" class="btn" disabled><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-bookmark-star" viewBox="0 0 20 20">
                          <path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.178.178 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.178.178 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.178.178 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.178.178 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.178.178 0 0 0 .134-.098L7.84 4.1z"/>
                          <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                          </svg> Already In Collection</button> 
                      <% } %>
                  </form>
                </div>
              </div> 
              <!-- End of Add To Collection -->
              <!-- Start of Modal Section --> 
            </div>

            <!-- Book Information -->
            <div class="col text-center px-2">
              <hr class="mb-4">
              <h1><%=singleBook.title%> </h1>
              <h4 class="lead py-1">by <%=singleBook.authors_names%></h4>
              <p class="pt-3 font-weight-light"><%=singleBook.description%></p>
              <p class="py-4 text-muted font-weight-light font-italic"><%=singleBook.genres_names%></p>
              <hr>
            </div>
          </div>
        </div>

        <!-- All Users' Notes made Public -->
        <div id="blue-palette-bg" class="container-fluid users-notes mt-1">
          <div class="row">
            <div class="col-12 w-75">
              <h1 class="text-center my-5">Here's What Other Users Have Caught</h1><hr id="white-divide">
            </div>

            <% publicNotes.forEach(note => { %>
              <div class="col-12 d-flex justify-content-center mt-4">
                  <div id="note-size" class="jumbotron shadow-sm rounded px-5 mx-5">
                    <p class="text-dark"><%= note.description %></p>
                  </div>
              </div>
            <% })%>
          </div>
        </div>

  <%- include('bootstrap-scripts') -%>
 
</body>
</html>